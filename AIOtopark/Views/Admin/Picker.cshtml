@{
    ViewData["Title"] = "Park Alanı Seç";
    Layout = null;
}

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Picker</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link href="~/css/picker.css" rel="stylesheet" />
</head>
<body>
    <label for="photoInput">Park Alanının Görüntüsü:</label>
    <input type="file" id="photoInput" accept="image/*" />
    <button onclick="clearSelection()">Seçimi Temizle</button>
    <button onclick="saveToJsonFile()">JSON Dosyasına Kaydet</button>
    <button onclick="saveAndClose()">Kaydet ve Kapat</button>
    <div id="canvasContainer" ></div>
    <div id="mouse-coordinates"></div>

    <script src="~/js/picker.js"></script>

</body>
<script>
    function saveAndClose() {
        // Kullanıcının yaptığı işlemler sonucu elde edilen JSON içeriği
        var jsonContent = JSON.stringify(posList, null, 2);

        // Ana sayfadaki fonksiyonu çağırarak JSON içeriğini iletiyoruz
        window.opener.handleSave(jsonContent);

        // Pencereyi kapat
        window.close();
    }
</script>